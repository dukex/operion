{
  "id": "weather-pocrane",
  "name": "Pocrane Weather Monitor",
  "description": "Monitor weather conditions in Pocrane, MG, Brazil every minute",
  "triggers": [
    {
      "id": "weather_cron_trigger",
      "type": "schedule",
      "configuration": {
        "cron": "*/1 * * * *"
      }
    }
  ],
  "metadata": {
    "tags": ["weather", "pocrane", "brazil", "monitor"]
  },
  "created_at": "2025-06-15T04:00:00Z",
  "updated_at": "2025-06-15T04:00:00Z",
  "status": "active",
  "steps": [
    {
      "id": "fetch_weather",
      "name": "fetch_weather",
      "conditional": {},
      "enabled": true,
      "on_success": "process_weather",
      "action": {
        "id": "fetch_weather",
        "type": "http_request",
        "configuration": {
          "method": "GET",
          "url": "https://api.open-meteo.com/v1/forecast?latitude=-19.6197&longitude=-41.6369&daily=sunset&current=temperature_2m,rain&timezone=America%2FSao_Paulo&past_days=1&forecast_days=1",
          "headers": {
            "Accept": "application/json"
          },
          "retry": {
            "attempts": 2,
            "delay": 3
          }
        }
      }
    },
    {
      "id": "process_weather",
      "name": "process_weather",
      "conditional": {},
      "enabled": true,
      "on_success": "save_weather",
      "action": {
        "id": "process_weather",
        "type": "transform",
        "configuration": {
          "input": "$.fetch_weather.body",
          "exp": "{ \"temp\": $.current.temperature_2m, \"rain\": $.current.rain}"
        }
      }
    },
    {
      "id": "save_weather",
      "conditional": {},
      "enabled": true,
      "action": {
        "id": "save_weather",
        "type": "file_write",
        "configuration": {
          "input": "$.process_weather",
          "file_name": "pocrane_weather.json",
          "directory": "/tmp/weather",
          "overwrite": true
        }
      }
    }
  ]
}
